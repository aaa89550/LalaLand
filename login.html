<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <script>
  if (localStorage.getItem('darkMode') === 'yes') {
    document.documentElement.classList.add('dark'); // åŠ åœ¨ <html>
  }
</script>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>LalaLandå¥³åŒèŠå¤©å®¤</title>
  <style>
  :root {
    --bg: #f7f1e1;            /* èƒŒæ™¯ï¼šç±³ç™½ */
    --text: #4a4a4a;          /* ä¸»æ–‡å­— */
    --card: #ffffff;          /* å¡ç‰‡åº• */
    --accent: #2877b9;        /* ä¸»æŒ‰éˆ• / é»ç¶´æµ·è— */
    --accent-dark: #16507a;   /* æŒ‰éˆ• hover */
    --soft: #e9dac1;          /* æ·ºç±³è‰²ï¼šå€å¡ŠèƒŒæ™¯ */
    --border: #a3c9ad;        /* æ·ºç¶ ï¼šé‚Šæ¡† */
    --shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
  }

  body {
    margin: 0;
    font-family: 'Noto Sans TC', sans-serif;
    background-color: var(--bg);
    color: var(--text);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 40px 24px;
    min-height: 100vh;
  }

  /* å¡ç‰‡å€åŸŸ */
  #login-page, #register-page, #anonymous-page {
    width: 320px;
    margin: 60px auto;
    background: var(--card);
    border-radius: 10px;
    box-shadow: var(--shadow);
    padding: 32px 24px 24px;
    display: none;
  }

  #main {
    display: none;
    max-width: 920px;
    margin: 40px auto;
    gap: 20px;
  }

  #sidebar {
    width: 200px;
    background: var(--card);
    padding: 16px 12px;
    border-radius: 8px;
    box-shadow: var(--shadow);
  }

  #chat {
    height: 320px;
    border: 1px solid var(--border);
    background: var(--card);
    overflow-y: auto;
    padding: 10px;
    border-radius: 8px;
  }

  #chat-title {
    text-align: center;
    margin-bottom: 10px;
  }

  .tab-btns {
    display: flex;
    gap: 8px;
    margin-bottom: 18px;
    justify-content: center;
  }

  .tab-btn {
    background: var(--soft);
    border-radius: 6px 6px 0 0;
    border: none;
    padding: 8px 24px;
    cursor: pointer;
    font-weight: bold;
    color: var(--text);
  }

  .tab-btn.active {
    background: var(--accent);
    color: white;
  }

  button {
    background-color: var(--accent);
    color: white;
    border: none;
    border-radius: 6px;
    padding: 10px 20px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: var(--shadow);
  }

  button:hover {
    background-color: var(--accent-dark);
  }

  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="file"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 12px;
    border: 1px solid var(--border);
    border-radius: 4px;
    background: var(--card);
    color: var(--text);
  }

  .switch-auth {
    background: none;
    border: none;
    text-decoration: underline;
    color: var(--accent);
    cursor: pointer;
    font-size: 14px;
    margin-top: 8px;
  }

  .tip {
    font-size: 14px;
    color: var(--text);
    background: var(--soft);
    border-radius: 6px;
    padding: 12px 16px;
    margin-bottom: 16px;
  }

  #user-list, #friend-list, #group-chat-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  #user-list li, .group-chat-item {
    padding: 8px 10px;
    margin-bottom: 6px;
    border-radius: 4px;
    cursor: pointer;
  }

  #user-list li:hover,
  .group-chat-item:hover,
  #user-list li.active {
    background: var(--soft);
  }

  .avatar-preview {
    display: block;
    margin: 12px auto;
    border-radius: 50%;
    width: 80px;
    height: 80px;
    object-fit: cover;
    background: #eee;
  }

  /* Mobile sidebar èˆ‡ modal å»ºè­° */
  .modal-content, .mobile-sidebar-drawer {
    background: var(--card);
    color: var(--text);
    border-radius: 8px;
    box-shadow: var(--shadow);
    padding: 20px;
  }

  .plus-btn {
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 50%;
    padding: 8px 10px;
    font-size: 16px;
    cursor: pointer;
  }

  .emoji-container span {
    font-size: 20px;
    margin: 4px;
    cursor: pointer;
  }
</style>
</head>
<body>
  <!-- ç™»å…¥/è¨»å†Š tab -->
  <div id="auth-tabs" class="tab-btns">
    <button id="login-tab-btn" class="tab-btn active">ç™»å…¥</button>
    <button id="register-tab-btn" class="tab-btn">è¨»å†Š</button>
  </div>
<div id="login-page" class="login-container">
  <h2>å¸³è™Ÿç™»å…¥</h2>
  <form id="login-form" class="login-form">
    <input type="email" id="login-email" placeholder="Email" required>
    <input type="password" id="login-password" placeholder="å¯†ç¢¼" required>
    <button type="submit" class="login-btn">ç™»å…¥</button>
    <div class="login-extra">
</div>
  </form>
  <button class="switch-auth" id="forgot-password-link" type="button">å¿˜è¨˜å¯†ç¢¼ï¼Ÿ</button>
</div>
  <div id="register-page">
    <h2>è¨»å†Šæ–°å¸³è™Ÿ</h2>
    <form id="register-form">
      <input type="email" id="register-email" placeholder="Email" required style="width:100%;margin-bottom:10px;">
      <input type="password" id="register-password" placeholder="å¯†ç¢¼" required style="width:100%;margin-bottom:10px;">
      <input type="text" id="register-nickname" placeholder="æš±ç¨±" required style="width:100%;margin-bottom:10px;">
      <input type="file" id="register-avatar" accept="image/*" required style="width:100%;margin-bottom:10px;">
      <img id="register-avatar-preview" src="" alt="é è¦½å¤§é ­è²¼" class="avatar-preview" style="display:none;">
      <button type="submit" style="width:100%;">è¨»å†Šä¸¦ç™»å…¥</button>
    </form>
  </div>
  </div>
  <!-- å¿˜è¨˜å¯†ç¢¼ Modalï¼Œæ”¾åœ¨ body æœ€å¾Œé¢ -->
<div class="modal" id="forgot-modal">
  <div class="modal-content">
    <span class="close" id="close-forgot-modal">&times;</span>
    <h3 style="margin-bottom:18px;color:var(--sea-dark);">å¯†ç¢¼é‡è¨­</h3>
    <div style="margin-bottom:18px;">
      <label for="forgot-email" style="color:var(--earth-brown);font-weight:bold;">è«‹è¼¸å…¥è¨»å†Šçš„ Emailï¼š</label>
      <input type="email" id="forgot-email" placeholder="Email" required style="margin-bottom:10px;">
    </div>
    <button id="forgot-submit-btn" style="width:100%;">å¯„é€é‡è¨­ä¿¡</button>
    <div id="forgot-message" style="margin-top:15px;font-size:14px;text-align:center;"></div>
  </div>
</div>
 <!-- æ‰‹æ©Ÿç‰ˆæ¼¢å ¡æŒ‰éˆ•å’ŒæŠ½å±œ sidebarï¼šæ”¾åœ¨ #main ä¹‹å‰ -->
  <button id="mobile-sidebar-btn" class="mobile-sidebar-btn">â˜°</button>
  <span style="font-size: 0px; margin-right: 2px;"></span> 
  <div id="mobile-sidebar-drawer" class="mobile-sidebar-drawer">
    <div class="mobile-sidebar-content">
      <button id="close-mobile-sidebar" class="close-mobile-sidebar">&times;</button>
      <h3>ã€€ã€€ã€€ã€€</h3>
      <div class="online-header">
      <h3>åœ¨ç·šæˆå“¡</h3>
      <button id="toggle-night-mode-mobile" class="night-icon-btn" title="åˆ‡æ›å¤œé–“æ¨¡å¼">ğŸŒ™</button>
      </div>
      <div class="tip-small">
        é»é¸æˆå¯é€²å…¥ä¸€å°ä¸€ç§è¨Šï¼Œæˆ–é»é¸ã€Œå¤§ç¾¤çµ„åˆ—è¡¨ã€é¸å€æš¢èŠã€‚
      </div>
<ul id="user-list-mobile"></ul>
<button id="show-friends-mobile" class="sidebar-btn">æˆ‘çš„å¥½å‹</button>
<div id="friend-area-mobile" style="display:none;">
  <ul id="friend-list-mobile"></ul>
</div>
      <!-- æ‰‹æ©Ÿ sidebar ä¸­çš„å¤§ç¾¤çµ„æŒ‰éˆ• -->
<button id="group-chat-list-btn-mobile" class="sidebar-btn">å¤§ç¾¤çµ„åˆ—è¡¨</button>
<div id="group-chat-area-mobile" style="display: none;">
  <ul id="group-chat-list-mobile">
    <li class="group-chat-item" data-room="chat">é–’èŠ</li>
    <li class="group-chat-item" data-room="love">æ‰¾ä¼´</li>
    <li class="group-chat-item" data-room="sex">ç´„ç‚®</li>
  </ul>
</div>
      <button id="edit-profile-btn-mobile">ç·¨è¼¯å€‹äººè³‡æ–™</button>
      <button id="logout-btn-mobile">ç™»å‡º</button>
    </div>
  </div>
  <!-- ä¸»ç•«é¢ -->
  <div id="main">
    <div id="sidebar">
  <div class="online-header">
  <h3>åœ¨ç·šæˆå“¡</h3>
  <button id="toggle-night-mode" class="night-icon-btn" title="åˆ‡æ›æ—¥å¤œé–“æ¨¡å¼">ğŸŒ™</button>
</div>
<div class="tip-small">
  é»é¸æˆå¯é€²å…¥ä¸€å°ä¸€ç§è¨Šï¼Œæˆ–é»é¸ã€Œå¤§ç¾¤çµ„åˆ—è¡¨ã€é¸å€æš¢èŠã€‚
</div>
<ul id="user-list"></ul>
<button id="show-friends" class="sidebar-btn">æˆ‘çš„å¥½å‹</button>
<div id="friend-area" style="display:none;">
  <ul id="friend-list"></ul>
</div>
  <!-- Sidebarä¸­çš„å¤§ç¾¤çµ„æŒ‰éˆ• -->
<button id="group-chat-list-btn" class="sidebar-btn">å¤§ç¾¤çµ„åˆ—è¡¨</button>
<div id="group-chat-area" style="display: none;">
  <ul id="group-chat-list">
    <li class="group-chat-item" data-room="chat">é–’èŠ</li>
    <li class="group-chat-item" data-room="love">æ‰¾ä¼´</li>
    <li class="group-chat-item" data-room="sex">ç´„ç‚®</li>
  </ul>
</div>
  <button id="edit-profile-btn" class="sidebar-btn">ç·¨è¼¯å€‹äººè³‡æ–™</button>
  <button id="logout-btn" class="sidebar-btn">ç™»å‡º</button>
</div>
    <div id="content">
      <h3 id="chat-title">èŠå¤©å®¤</h3>
      <div class="tip" id="chat-tip" style="display:none;"></div>
      <div id="chat-action" style="margin-top: 8px;"></div>
      <div id="chat"></div>
<div id="input-preview" style="display: none;"></div> <!-- âœ… åœ–ç‰‡ç¸®åœ–é è¦½ï¼ˆåœ¨è¼¸å…¥æ¡†ä¸Šæ–¹ï¼‰ -->

<div id="input-area">
  <button id="plus-btn" class="plus-btn">ï¼‹</button>

  <div id="plus-menu" style="display: none;">
    <button id="emoji-btn" title="æ’å…¥è¡¨æƒ…" class="plus-btn">ğŸ˜Š</button>
    <button id="upload-btn" class="plus-btn">ğŸ–¼ï¸</button>
    <input type="file" id="upload-input" accept="image/*" style="display: none;" />
    <button id="vote-btn" class="plus-btn">ğŸ—³ï¸</button>
  </div>

  <div id="emoji-picker" style="display: none;">
    <div class="emoji-container">
      <span>ğŸ˜‚</span><span>ğŸ˜</span><span>ğŸ¥º</span><span>ğŸ˜¡</span><span>ğŸ˜­</span>
      <span>ğŸ˜</span><span>ğŸ˜³</span><span>ğŸ˜˜</span><span>ğŸ¤£</span><span>ğŸ˜Š</span>
      <span>ğŸ˜´</span><span>ğŸ™„</span><span>ğŸ±</span><span>ğŸ¸</span><span>ğŸ¦Š</span>
      <span>ğŸŒˆ</span><span>â¤ï¸</span><span>ğŸ«¶</span><span>ğŸ‘­</span><span>âœ¨</span><span>ğŸ’‹</span>
    </div>
  </div>

  <input id="msg" type="text" placeholder="è¼¸å…¥è¨Šæ¯..." autocomplete="off">
  <button id="send">é€å‡º</button>
</div>

<div id="edit-profile-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close" id="close-profile-modal">&times;</span>
      <form id="edit-profile-form">
        <label>æš±ç¨±ï¼š<input type="text" id="edit-nickname" required></label><br>
        <label>é ­åƒï¼š<input type="file" id="edit-avatar" accept="image/*"></label><br>
        <img id="edit-avatar-preview" style="width:64px;height:64px;display:none;border-radius:50%;">
        <button type="submit">å„²å­˜</button>
      </form>
    </div>
  </div>

  <div id="vote-modal" class="modal" style="display:none;">
  <div class="modal-content" style="max-width:400px;">
    <span class="close" id="close-vote-modal">&times;</span>
    <h3>ç™¼èµ·æŠ•ç¥¨</h3>
    <label>å•é¡Œï¼š</label>
    <input type="text" id="vote-question" placeholder="è«‹è¼¸å…¥å•é¡Œ" style="width:100%; margin-bottom:10px;">

    <div id="vote-options">
      <input type="text" class="vote-option-input" placeholder="é¸é … 1">
      <input type="text" class="vote-option-input" placeholder="é¸é … 2">
    </div>

    <button id="add-option-btn">â• æ–°å¢é¸é …</button>
    <button id="submit-vote-btn" style="margin-top:12px;">é€å‡ºæŠ•ç¥¨</button>
  </div>
</div>
  <script src="splash.js"></script>
  <script src="linkify.js"></script>
  <script type="module" src="main.js"></script>
</body>
</html>
